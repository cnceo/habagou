<?php
bjload("bjphp.vendor.ui.CachePage");
class user_login_cache extends \bjphp\vendor\ui\CachePage
{
	public function run($uicontext)
	{
		$this->_root =$uicontext;
		$this->_this =$this->_root;
		
		$this->do_html("<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset=\"utf-8\" />\r\n    <title>哈巴狗</title>\r\n\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\" name=\"viewport\">\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"/res/css/css.css?t=2\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"/res/css/hui_main.css?t=1\"/>\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"../../res/css/yanzhengma.css\"/>\r\n    <script src=\"/res/js/jquery-1.12.3.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\r\n    <script src=\"/res/js/hui_tool.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\r\n    <script src=\"/uilib/bjui.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\r\n    <script src=\"/res/js/hui_main.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\r\n    <script src=\"/res/js/hui_login.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\r\n    <script src=\"/res/js/hui_findpwd.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\r\n    <script src=\"/res/js/js.KinerCode.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\r\n    \r\n</head>\r\n<body>\r\n    <div id=\"login\">\r\n        <div class=\"logo\"></div>\r\n        <div class=\"login_form\">\r\n            <form>\r\n                <input type=\"text\" id=\"mobile\" placeholder=\"手机\">\r\n                <input type=\"password\" id=\"pass\" placeholder=\"密码\">\r\n                <input type=\"button\" class=\"loginbtn\" value=\"登录\">\r\n            </form>\r\n\r\n        </div>\r\n        <div class=\"forget1\"><span>忘记密码</span></div>\r\n        <!--提示框-->\r\n        <div id=\"infoBox\">\r\n            <span class=\"close8\"></span>\r\n            <div class=\"infoText\">提示信息</div>\r\n        </div>\r\n        <!--忘记密码面板-->\r\n        <div id=\"forgetPassBox\">\r\n            <div class=\"close1\"></div>\r\n            <form class=\"chengePassForm\" style=\"padding-bottom:15px;\">\r\n                <input type=\"text\" class=\"forgetInput\" name=\"oldMobile\" id=\"oldMobile\" placeholder=\"已注册手机号\" />\r\n                <div class=\"checkCodeBox\">\r\n                    <input type=\"text\" name=\"checkCode\" id=\"checkCode\" class=\"forgetInput checkCode\" placeholder=\"验证码\" />\r\n                    <input type=\"button\" id=\"btn\" disabled-id=\"0\" value=\"获取验证码\" class=\"getCodeBtn getCodeBtn0\" />\r\n                    <!--<div class=\"getCodeBtn\" disabled-id=\"0\" >获取验证码</div>-->\r\n                </div>\r\n                <input type=\"password\" name=\"newpass\" id=\"newpass\" class=\"forgetInput\" placeholder=\"新密码\" />\r\n                <input type=\"password\" name=\"againPass\" id=\"againPass\" class=\"forgetInput\" placeholder=\"确认密码\" />\r\n                <div class=\"confirmChange\"></div>\r\n            </form>\r\n        </div>\r\n        \r\n        <fieldset id=\"yanzhengBox\">\r\n        \t<div class=\"close1\"></div>\r\n\t\t    <!--<form class=\"inputBox\">\r\n\t\t        <input id=\"inputCode\" type=\"text\" class=\"inputs\"/>\r\n\t\t        <span id=\"code\" class=\"mycode\"></span>\r\n\t\t        <input type=\"button\" value=\"提交\" id=\"submit\" class=\"inputs\"/>\r\n\t\t    </form>-->\r\n\t\t</fieldset>\r\n        \r\n        <!--遮罩-->\r\n        <div id=\"screen\"></div>\r\n        <div id=\"screen3\"></div>\r\n    </div>\r\n\r\n\r\n    <script type=\"text/javascript\">\r\n        window.onload = function(){\r\n        \tvar screen = ".'$'."('#screen');\r\n        \t//全局报错\r\n        \tbjui_config.error_report=function(userexception, src, param, msg, fnFail){\r\n        \t\t".'$'."('.inputBox').remove();\r\n        \t\t".'$'."('#screen3').fadeOut();\r\n\t\t\t\t".'$'."('#infoBox').show();\r\n\t\t\t\t".'$'."('#infoBox').find('.infoText').text(msg);\r\n\t\t\t}\r\n\t\t\t\r\n\r\n        \t\r\n        \t//骨头下落动画\r\n//          var page=document.getElementById(\"login\")\r\n//          //生成骨头\r\n//          function createSnow(l,t,s,r){\r\n//              var  newNode=document.createElement(\"div\");\r\n//              newNode.style.height=s+\"px\";\r\n//              newNode.style.width=s+\"px\";\r\n//              newNode.style.position= \"absolute\"\r\n//              newNode.style.left=l+\"px\";\r\n//              newNode.style.top=t+\"px\";\r\n//              newNode.style.transform=\"rotate(\"+r+\"deg)\";\r\n//              newNode.style.background=\"url('../../res/image/gutou.png')\";\r\n//              newNode.style.backgroundSize=\"100% 100%\";\r\n//              newNode.style.zIndex = 3\r\n//              page.appendChild(newNode);\r\n//              startMove(newNode);\r\n//          }\r\n//          var time1=null;\r\n//          var poY=0;\r\n//          setInterval(function(){\r\n//              var le=parseInt(Math.random()*375);//随机生成位置及宽高\r\n//              var to=parseInt(Math.random()*10);\r\n//              var size=parseInt(Math.random()*20+20);\r\n//              var rotate = parseInt(Math.random()*360+1);\r\n//              createSnow(le,to,size,rotate);\r\n//          },2000);\r\n//          //骨头下落\r\n//          function startMove(obj){\r\n//              var poY=obj.offsetTop;//获取对象到顶部边宽的距离\r\n//              var time2=null;\r\n//              function move(){\r\n//                  poY++;\r\n//                  obj.style.top=poY+\"px\";\r\n//                  if(poY>600){//当骨头超出容器时的处理事件\r\n//                      clearInterval(time2);//清除计时器\r\n//                      page.removeChild(obj);//删除超出容器的节点对象\r\n//                  }\r\n//              }\r\n//              time2=setInterval(move,30);\r\n//          }\r\n            \r\n            \r\n            //关闭点击验证码\r\n            ".'$'."('.close1').on('click',function(){\r\n            \t".'$'."('#yanzhengBox').hide();\r\n            \t".'$'."('.inputBox').remove();\r\n            \t".'$'."('#screen3').hide();\r\n            })\r\n            \r\n            //随机验证码\r\n            function yanzhengma(){\r\n            \t\r\n\t            var inp = document.getElementById('inputCode');\r\n\t\t\t    var code = document.getElementById('code');\r\n\t\t\t    var submit = document.getElementById('submit');\r\n\t\t\t    var inp2 = document.getElementById('inputCode2');\r\n\t\t\t    var code2 = document.getElementById('code2');\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t    var c = [\"+\", \"-\", \"*\", \"/\"];\r\n\t\t\t    var arr = [];\r\n\t\t\t\r\n\t\t\t    for (var i = 0; i < 1000; i++) {\r\n\t\t\t\r\n\t\t\t        var num = parseInt(Math.random() * 100 + 1);\r\n\t\t\t        var num2 = parseInt(Math.random() * 100 + 1);\r\n\t\t\t        var num3 = parseInt(Math.random() * 4);\r\n\t\t\t\r\n\t\t\t        if (c[num3] === '/') {\r\n\t\t\t            var x = num % num2;\r\n\t\t\t            if (x != 0) {\r\n\t\t\t                num -= x;\r\n\t\t\t\r\n\t\t\t                if(num==0){\r\n\t\t\t                    var temp = num;\r\n\t\t\t                    num2 = num;\r\n\t\t\t                    num = temp;\r\n\t\t\t                }\r\n\t\t\t\r\n\t\t\t            }\r\n\t\t\t        }\r\n\t\t\t\r\n\t\t\t        if(num==0&&num==0){\r\n\t\t\t            continue;\r\n\t\t\t        }\r\n\t\t\t\r\n\t\t\t        var str = num + c[num3] + num2;\r\n\t\t\t\r\n\t\t\t        arr.push(str);\r\n\t\t\t\r\n\t\t\t    }\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t    //======================插件引用主体\r\n\t\t\t    var c = new KinerCode({\r\n\t\t\t        len: 4,//需要产生的验证码长度\r\n\t\t\t        //chars: [\"1+2\",\"3+15\",\"6*8\",\"8/4\",\"22-15\"],//问题模式:指定产生验证码的词典，若不给或数组长度为0则试用默认字典\r\n\t\t\t        chars: [\r\n\t\t\t            1, 2, 3, 4, 5, 6, 7, 8, 9, 0,\r\n\t\t\t            'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',\r\n\t\t\t            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'\r\n\t\t\t        ],//经典模式:指定产生验证码的词典，若不给或数组长度为0则试用默认字典\r\n\t\t\t        question: false,//若给定词典为算数题，则此项必须选择true,程序将自动计算出结果进行校验【若选择此项，则可不配置len属性】,若选择经典模式，必须选择false\r\n\t\t\t        copy: false,//是否允许复制产生的验证码\r\n\t\t\t        bgColor: \"\",//背景颜色[与背景图任选其一设置]\r\n\t\t\t        bgImg: \"/res/image/kong.png\",//若选择背景图片，则背景颜色失效\r\n\t\t\t        randomBg: false,//若选true则采用随机背景颜色，此时设置的bgImg和bgColor将失效\r\n\t\t\t        inputArea: inp,//输入验证码的input对象绑定【 HTMLInputElement 】\r\n\t\t\t        codeArea: code,//验证码放置的区域【HTMLDivElement 】\r\n\t\t\t        click2refresh: true,//是否点击验证码刷新验证码\r\n\t\t\t        false2refresh: true,//在填错验证码后是否刷新验证码\r\n\t\t\t        validateObj: submit,//触发验证的对象，若不指定则默认为已绑定的输入框inputArea\r\n\t\t\t        validateEven: \"click\",//触发验证的方法名，如click，blur等\r\n\t\t\t        validateFn: function (result, code) {//验证回调函数\r\n\t\t\t            if (result) {\r\n\t\t\t            \t".'$'."('#infoBox').find('.infoText').text('验证成功');\r\n\t\t\t                ".'$'."('#infoBox').show();\r\n\t\t\t                ".'$'."('#yanzhengBox').hide();\r\n          \t\t\t\t\tBizCall(\r\n\t\t\t\t\t\t\t\t\t\"user.User.login\",\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"phone\"\t:  ".'$'."('#mobile').val(),\r\n\t\t\t\t\t\t\t\t\t\t\"pwd\"\t: ".'$'."('#pass').val()\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfunction(data){\r\n\t\t\t                          ".'$'."('#infoBox').find('.infoText').text('登录成功');\r\n\t\t\t                          ".'$'."('#infoBox').show();\r\n\t\t\t                          ".'$'."('.inputBox')[0].reset()\r\n\t\t\t\t\t\t\t\t\t  window.location.href=\"/user/user/home\";\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t            } else {\r\n\t\t\t                if (this.opt.question) {\r\n\t\t\t                \t".'$'."('#infoBox').find('.infoText').text('验证码输入错误');\r\n\t\t\t                    ".'$'."('#infoBox').show();\r\n\t\t\t                    ".'$'."('.inputBox')[0].reset()\r\n\t\t\t                    //alert('验证失败:' + code.answer);\r\n\t\t\t                } else {\r\n\t\t\t                \t".'$'."('#infoBox').find('.infoText').text('验证码输入错误');\r\n\t\t\t                    ".'$'."('#infoBox').show();\r\n\t\t\t                    ".'$'."('.inputBox')[0].reset()\r\n\t\t\t                    //alert('验证失败:' + code.strCode);\r\n\t\t\t                }\r\n\t\t\t            }\r\n\t\t\t        }\r\n\t\t\t    });\r\n            }\r\n            \r\n            //电话验证\r\n            function checkPhone(){ \r\n\t\t\t    var phone = ".'$'."('#mobile').val();\r\n\t\t\t    if((/^1[34578]\\d{9}".'$'."/.test(phone))){ \r\n\t\t\t        return true; \r\n\t\t\t    } \r\n\t\t\t}\r\n\t\t    \r\n\t\t    //密码验证\r\n\t\t    function checkpass(){\r\n\t\t    \tif( ".'$'."('#pass').val().length > 5 ){\r\n\t\t\t\t\treturn true\t\t\r\n\t\t\t    }\r\n\t\t    }\r\n\t\t    \r\n\t\t\t".'$'."(\".loginbtn\").click(function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tvar phone = ".'$'."('#mobile').val();\r\n\t\t\t\tvar pwd   = ".'$'."('#pass').val();\r\n\t\t\t\t\r\n\t\t\t\tif( phone == \"\" ){\r\n\t\t\t\t\t".'$'."('#infoBox').show();\r\n\t\t    \t    ".'$'."('#infoBox').find('.infoText').text('请输入手机号');\r\n\t\t\t\t}else if( pwd == \"\" ){\r\n\t\t\t\t\t".'$'."('#infoBox').show();\r\n\t\t    \t    ".'$'."('#infoBox').find('.infoText').text('请输入密码');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif( !checkPhone() && !checkpass() ){\r\n\t\t\t\t\t\t".'$'."('#infoBox').show();\r\n\t\t    \t        ".'$'."('#infoBox').find('.infoText').text('手机号格式不正确||密码至少6位');\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif( !checkPhone() ){\r\n\t\t\t\t\t\t\t".'$'."('#infoBox').show();\r\n\t\t    \t            ".'$'."('#infoBox').find('.infoText').text('手机号格式不正确');\r\n\t\t\t\t\t\t}else if( !checkpass() ){\r\n\t\t\t\t\t\t\t".'$'."('#infoBox').show();\r\n\t\t    \t            ".'$'."('#infoBox').find('.infoText').text('密码至少6位');\r\n\t\t\t\t\t\t}else{\r\n\t\t                   \r\n\t\t                    var htmlForm = '<form class=\"inputBox\">'+\r\n\t\t\t\t\t\t\t\t\t\t        '<input id=\"inputCode\" type=\"text\" class=\"inputs\"/>'+\r\n\t\t\t\t\t\t\t\t\t\t        '<span id=\"code\" class=\"mycode\"></span>'+\r\n\t\t\t\t\t\t\t\t\t\t        '<input type=\"button\" value=\"提交\" id=\"submit\" class=\"inputs\"/>'+\r\n\t\t\t\t\t\t\t\t\t\t    '</form>'\r\n\t\t\t                ".'$'."('#yanzhengBox').append(htmlForm);\r\n\t\t\t                ".'$'."('#yanzhengBox').show();\t\r\n\t\t\t                ".'$'."('#screen3').show();\r\n\t\t                    yanzhengma()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t    })\r\n            \r\n            \r\n            \r\n            \r\n            \r\n        }\r\n    </script>\r\n\r\n\r\n</body>\r\n</html>");
	}
}
